{% extends "base.html" %}

{% block title %}{{ task.title }} - Smart ToDo App{% endblock %}

{% block content %}
<div class="task-card">
    <div class="task-header">
        <h2 class="task-title">
            {% if task.status == 'completed' %}
                <s>{{ task.title }}</s>
            {% else %}
                {{ task.title }}
            {% endif %}
        </h2>
        <div>
            <span class="badge badge-{{ task.priority }}">{{ task.priority }}</span>
            <span class="badge badge-{{ task.status }}">
                {% if task.status == 'pending' %}æœªå®Œäº†{% else %}å®Œäº†{% endif %}
            </span>
        </div>
    </div>
    
    {% if task.description %}
    <div style="margin: 20px 0; padding: 15px; background-color: #f9fafb; border-radius: 5px;">
        <p style="white-space: pre-wrap;">{{ task.description }}</p>
    </div>
    {% endif %}
    
    <div class="task-meta" style="margin-top: 20px;">
        {% if task.category %}
        <div><strong>ã‚«ãƒ†ã‚´ãƒª:</strong> {{ task.category }}</div>
        {% endif %}
        {% if task.due_date %}
        <div><strong>æœŸé™:</strong> {{ task.due_date.strftime('%Y-%m-%d %H:%M') }}</div>
        {% endif %}
        {% if task.location %}
        <div><strong>å ´æ‰€:</strong> {{ task.location }}</div>
        {% endif %}
        {% if task.weather %}
        <div style="margin: 15px 0; padding: 15px; background-color: {% if task.weather.is_bad_weather %}#fef3c7{% else %}#f0f9ff{% endif %}; border-radius: 5px; border-left: 4px solid {% if task.weather.is_bad_weather %}#f59e0b{% else %}#3b82f6{% endif %};">
            <strong>å¤©æ°—æƒ…å ±:</strong>
            <div style="margin-top: 10px; display: flex; align-items: center; gap: 10px;">
                {% if task.weather.is_bad_weather %}
                <span style="font-size: 24px;">âš ï¸</span>
                <span style="color: #f59e0b; font-weight: bold;">æ‚ªå¤©å€™ã®å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™</span>
                {% else %}
                <span style="font-size: 24px;">ğŸŒ¤ï¸</span>
                {% endif %}
                <span>{{ task.weather.condition }}</span>
                {% if task.weather.temp is not none %}
                <span style="font-weight: bold;">{{ task.weather.temp }}Â°C</span>
                {% endif %}
            </div>
        </div>
        {% endif %}
        <div><strong>ä½œæˆæ—¥æ™‚:</strong> {{ task.created_at.strftime('%Y-%m-%d %H:%M:%S') }}</div>
        <div><strong>æ›´æ–°æ—¥æ™‚:</strong> {{ task.updated_at.strftime('%Y-%m-%d %H:%M:%S') }}</div>
    </div>
    
    <div class="actions" style="margin-top: 30px;">
        <a href="/tasks/{{ task.id }}/edit" class="btn btn-primary">ç·¨é›†</a>
        <form method="POST" action="/tasks/{{ task.id }}/toggle" style="display: inline;">
            <button type="submit" class="btn btn-success">
                {% if task.status == 'pending' %}å®Œäº†ã«ã™ã‚‹{% else %}æœªå®Œäº†ã«æˆ»ã™{% endif %}
            </button>
        </form>
        <form method="POST" action="/tasks/{{ task.id }}/delete" style="display: inline;" onsubmit="return confirm('æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ');">
            <button type="submit" class="btn btn-danger">å‰Šé™¤</button>
        </form>
        <a href="/" class="btn btn-secondary">ä¸€è¦§ã«æˆ»ã‚‹</a>
    </div>
</div>
{% endblock %}







